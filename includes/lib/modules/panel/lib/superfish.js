/* jQuery Superfish Menu Plugin - Copyright (c) 2013 Joel Birch */
(function(e){'use strict';var s=(function(){var s={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},h=(function(){var s=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(s){e(window).load(function(){e('body').children().on('click',e.noop)})};return s})(),u=(function(){var e=document.documentElement.style;return('behavior' in e&&'fill' in e&&/iemobile/i.test(navigator.userAgent))})(),f=function(e,n){var o=s.menuClass;if(n.cssArrows){o+=' '+s.menuArrowClass};e.toggleClass(o)},p=function(n,o){return n.find('li.'+o.pathClass).slice(0,o.pathLevels).addClass(o.hoverClass+' '+s.bcClass).filter(function(){return(e(this).children(o.popUpSelector).hide().show().length)}).removeClass(o.pathClass)},l=function(e){e.children('a').toggleClass(s.anchorClass)},a=function(e){var s=e.css('ms-touch-action');s=(s==='pan-y')?'auto':'pan-y';e.css('ms-touch-action',s)},d=function(s,o){var i='li:has('+o.popUpSelector+')';if(e.fn.hoverIntent&&!o.disableHI){s.hoverIntent(n,t,i)}else{s.on('mouseenter.superfish',i,n).on('mouseleave.superfish',i,t)};var r='MSPointerDown.superfish';if(!h){r+=' touchend.superfish'};if(u){r+=' mousedown.superfish'};s.on('focusin.superfish','li',n).on('focusout.superfish','li',t).on(r,'a',o,c)},c=function(s){var o=e(this),t=o.siblings(s.data.popUpSelector);if(t.length>0&&t.is(':hidden')){o.one('click.superfish',!1);if(s.type==='MSPointerDown'){o.trigger('focus')}else{e.proxy(n,o.parent('li'))()}}},n=function(){var s=e(this),n=o(s);clearTimeout(n.sfTimer);s.siblings().superfish('hide').end().superfish('show')},t=function(){var n=e(this),s=o(n);if(h){e.proxy(r,n,s)()}else{clearTimeout(s.sfTimer);s.sfTimer=setTimeout(e.proxy(r,n,s),s.delay)}},r=function(s){s.retainPath=(e.inArray(this[0],s.e$)>-1);this.superfish('hide');if(!this.parents('.'+s.hoverClass).length){s.onIdle.call(i(this));if(s.e$.length){e.proxy(n,s.e$)()}}},i=function(e){return e.closest('.'+s.menuClass)},o=function(e){return i(e).data('sf-options')};return{hide:function(s){if(this.length){var r=this,n=o(r);if(!n){return this};var a=(n.retainPath===!0)?n.e$:'',t=r.find('li.'+n.hoverClass).add(this).not(a).removeClass(n.hoverClass).children(n.popUpSelector),i=n.speedOut;if(s){t.show();i=0};n.retainPath=!1;n.onBeforeHide.call(t);t.stop(!0,!0).animate(n.animationOut,i,function(){var s=e(this);n.onHide.call(s)})};return this},show:function(){var e=o(this);if(!e){return this};var n=this.addClass(e.hoverClass),s=n.children(e.popUpSelector);e.onBeforeShow.call(s);s.stop(!0,!0).animate(e.animation,e.speed,function(){e.onShow.call(s)});return this},destroy:function(){return this.each(function(){var o=e(this),n=o.data('sf-options'),t;if(!n){return!1};t=o.find(n.popUpSelector).parent('li');clearTimeout(n.sfTimer);f(o,n);l(t);a(o);o.off('.superfish').off('.hoverIntent');t.children(n.popUpSelector).attr('style',function(e,s){return s.replace(/display[^;]+;?/g,'')});n.e$.removeClass(n.hoverClass+' '+s.bcClass).addClass(n.pathClass);o.find('.'+n.hoverClass).removeClass(n.hoverClass);n.onDestroy.call(o);o.removeData('sf-options')})},init:function(n){return this.each(function(){var t=e(this);if(t.data('sf-options')){return!1};var o=e.extend({},e.fn.superfish.defaults,n),i=t.find(o.popUpSelector).parent('li');o.e$=p(t,o);t.data('sf-options',o);f(t,o);l(i);a(t);d(t,o);i.not('.'+s.bcClass).superfish('hide',!0);o.onInit.call(this)})}}})();e.fn.superfish=function(n,o){if(s[n]){return s[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==='object'||!n){return s.init.apply(this,arguments)}else{return e.error('Method '+n+' does not exist on jQuery.fn.superfish')}};e.fn.superfish.defaults={popUpSelector:'ul,.sf-mega',hoverClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:!0,disableHI:!1,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop};e.fn.extend({hideSuperfishUl:s.hide,showSuperfishUl:s.show})})(jQuery);